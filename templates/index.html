{% extends "base.html" %}

{# Set active class tag for navigation bar #}
{% set active_page = 'index' %}

{# Set page title #}
{% block title %}NBA Stats{% endblock %}

{# Web content code goes here #}

{% block content %}
    <div class="row h-100">
        <div class="col-lg-12 px-0">
            <div id="map" class="h-100"></div>
        </div>
        <!-- <div class="col-lg-5 px-0">
            <canvas id="myChart" class="m-3"></canvas>
        </div> -->
    </div>
{% endblock %}
{% block script %}
    let arenaInfo =  {{ arenaInfo|safe }};
    let arenaMarker = [];

    // Create a map object.
    let myMap = L.map("map", {
        center: [37.09, -95.71],
        zoom: 4
    });

    for (var i=0; i < arenaInfo.length; i++) {
        let iconurl = arenaInfo[i].logoURL;

        let teamIcon; 

        if (arenaInfo[i].teamName == 'Los Angeles Lakers') {
            teamIcon = L.icon({
                iconUrl: iconurl,
                iconSize: [40,40],
                iconAnchor: [10,0]
            });
            

    } else {
        teamIcon = L.icon({
            iconUrl: iconurl,
            iconSize: [40,40]
        });
        
    }

    
        arenaMarker.push(
            L.marker(arenaInfo[i].location, {icon: teamIcon, alt:arenaInfo[i].teamName}).bindPopup("<div><h2 style='font-family: Nunito Sans, sans-serif'><a href='"+arenaInfo[i].arenaURL+"'>"+arenaInfo[i].arenaName+"</a></h2><hr><h5>Home of the "+ arenaInfo[i].teamName +"!</h5> <p style='font-family: Nunito Sans, sans-serif; font-size: 18.5px;'>Sponsored by <a href='"+arenaInfo[i].sponsorURL+"'>"+arenaInfo[i].sponsorName+"</a></p>"+"</div>").addTo(myMap)
        );
    }

    // Add a tile layer.
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
       attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(myMap);
    
{% endblock %}
